---
title: "[Python] DataFrameì„ ìš”ì•½í•˜ëŠ” í•¨ìˆ˜ ì •ì˜í•˜ê¸°"
excerpt: "dataframeì„ ì´í•´í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” shape, head, describe ë“±ì˜ ê¸°ëŠ¥ì„ í•œ ë²ˆì— ì¶œë ¥í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤."
layout: single
categories: "Python"
tags: ["describe", "datetime_is_numeric", "summary"]

toc: true
toc_sticky: true
toc_label : "ëª©ì°¨"
toc_icon: "bars"
---

***

ë°ì´í„°í”„ë ˆì„ì„ ì •ì˜í•˜ê³  ë°ì´í„°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„  ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ì½”ë“œ ì‹¤í–‰í•œ ê²°ê³¼ë¥¼ ë³´ë©´, ê²°ê³¼ë¥¼ í•œ ëˆˆì— íŒŒì•…í•˜ê¸° ì–´ë µë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ëŸ¬í•œ ë‹¨ì ì„ í•´ê²°í•˜ê³ ì ë°ì´í„° ì´í•´ë¥¼ ìœ„í•œ ì •ë³´ê°€ í•¨ì¶•ëœ ë°ì´í„°í”„ë ˆì„ì„ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ì˜€ë‹¤.<br>
í•¨ìˆ˜ë¥¼ ì •ì˜í–ˆì„ ë•Œì™€ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ì „ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë¹„êµí•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œ ë°ì´í„°ëŠ” [Kaggle datasets, 'Forecasting Mini-Course Sales'](https://www.kaggle.com/competitions/playground-series-s3e19)ì—ì„œ ë‹¤ìš´ë°›ì•„ì„œ ì‚¬ìš©í•˜ì˜€ê³  ì½”ë“œ ì‹¤í–‰ì€ ```Jupyter notebook``` ì—ì„œ ì§„í–‰í•˜ì˜€ë‹¤. 

## í•¨ìˆ˜ ì‚¬ìš© X
```python
# ë°ì´í„° í¬ê¸° ì¶œë ¥
print(df.shape)

# ë°ì´í„° ì •ë³´
print(train.info())

# ë°ì´í„° íŒŒì•…(dfì˜ ìƒìœ„ 3ê°œ, í•˜ìœ„ 3ê°œ ë°ì´í„° ì¶œë ¥)
display(df.head(3))
display(df.tail(3))

# ë°ì´í„° ê°œìˆ˜ íŒŒì•…(ì „ì²´ ê°œìˆ˜, ìœ ì¼ê°’, ê²°ì¸¡ê°’)
display(df.describe(include='all'))
```

<div style="text-align : center;">
<img src="/assets/images/python/python_14_1.png" width="80%">
</div>
<center><small>Fig 1. ìœ„ ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼</small></center>

<br>

ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ê·¸ ë°ì´í„°ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„  ìœ„ì™€ ê°™ì€ ì‘ì—…ì„ í¬í•¨í•œë‹¤. ìœ„ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ë©´ ìŠ¤í¬ë¡¤ì„ í†µí•´ ê° ì •ë³´ë¥¼ í™•ì¸í•´ì•¼ëœë‹¤ëŠ” ì ì—ì„œ í•œ ëˆˆì— ì „ì²´ ë°ì´í„°ë¥¼ ì´í•´í•˜ê¸°ì—” ì–´ë µë‹¤. ê·¸ë˜ì„œ ì¤‘ìš”í•œ ì •ë³´ë¥¼ í•˜ë‚˜ì˜ ë°ì´í„°í”„ë ˆì„ìœ¼ë¡œ ìš”ì•½í•˜ì—¬ ì „ì²´ ë°ì´í„°ë¥¼ í•œ ëˆˆì— íŒŒì•…í•˜ê¸° ì¢‹ê²Œ summaryìš© dfë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•´ ë³´ì•˜ë‹¤.

## í•¨ìˆ˜ ì‚¬ìš© O
```python
def summary(df):
    print(f'data shape: {df.shape}')
    describes = df.describe(include='all', datetime_is_numeric=True).T
    # summaryìš© dataframe ìƒì„±
    summary_df = pd.DataFrame(df.dtypes, columns=['data type'])
    summary_df['#unique'] = df.nunique().values
    summary_df['#missing'] = df.isnull().sum().values
    summary_df['%missing'] = df.isnull().mean().values * 100
    if 'min' in describes.columns:
        summary_df['min'] = describes['min'].values
        summary_df['max'] = describes['max'].values
    if 'top' in describes.columns:
        summary_df['top'] = describes['top'].values
        summary_df['freq'] = describes['freq'].values
    summary_df['1st value'] = df.loc[0].values
    summary_df['2nd value'] = df.loc[1].values
    summary_df['3rd value'] = df.loc[2].values
    return summary_df
```

<div style="text-align : center;">
<img src="/assets/images/python/python_14_2.png">
</div>
<center><small>Fig 2. í•¨ìˆ˜ ì‚¬ìš© ê²°ê³¼</small></center>

<br>

summary ìš© ë°ì´í„°í”„ë ˆì„ì„ ìƒì„±í•˜ê¸° ìœ„í•œ í•¨ìˆ˜ë¥¼ ë³´ë©´ if ë¬¸ì„ ë‘ ë²ˆ ì‚¬ìš©í–ˆëŠ”ë° ì´ëŠ” ì£¼ì–´ì§„ ë°ì´í„°ê°€ ëª¨ë‘ ìˆ«ìë¡œ ì´ë£¨ì–´ì§„ ê²½ìš° ë˜ëŠ” ë¬¸ìì—´ë¡œ ì´ë£¨ì–´ì§„ ê²½ìš°ë¥¼ ê³ ë ¤í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ë˜í•œ ë¬¸ì, ìˆ«ì ë‘ í˜•íƒœ ëª¨ë‘ë¥¼ í¬í•¨í•˜ëŠ” ë°ì´í„°ëŠ” min, max, top, freq ì»¬ëŸ¼ì´ ëª¨ë‘ ì¶œë ¥ëœë‹¤.

## ğŸ’¡ datetime_is_numeric=True 
ë§Œì•½ ë‚ ì§œ ë°ì´í„°ê°€ ìˆëŠ” ë°ì´í„°í”„ë ˆì„ì— describe í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ë©”ì‹œì§€ê°€ ë°œìƒí•œë‹¤.

> FutureWarning: Treating datetime data as categorical rather than numeric in `.describe` is deprecated and will be removed in a future version of pandas. Specify `datetime_is_numeric=True` to silence this warning and adopt the future behavior now.
  df.describe(include='all')

ë©”ì‹œì§€ë¥¼ í•´ì„í•´ ë³´ë©´ pandasì—ì„  ì´í›„ ë²„ì „ì— datetimeì„ ì¹´í…Œê³ ë¦¬ ê°’ìœ¼ë¡œ ì—¬ê¸°ì§€ ì•Šê³  ìˆ«ìë¡œ ì·¨ê¸‰í•˜ì—¬ ê¸°ìˆ  í†µê³„ë‚¼ ê²ƒì´ë¼ëŠ” ëœ»ì´ë‹¤. ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ë°œìƒì‹œí‚¤ì§€ ì•Šìœ¼ë ¤ë©´ ```datetime_is_numeric=True``` ì„ ì¸ìˆ˜ë¡œ ì „ë‹¬í•˜ë¼ëŠ” ë©”ì‹œì§€ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤.<small>cf. ì‚¬ìš©í•˜ê³  ìˆëŠ” íŒë‹¤ìŠ¤ ë²„ì „: '1.4.2'</small>

ìœ„ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´, warnings ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜¤ë¥˜ë©”ì‹œì§€ë¥¼ ë¬´ì‹œí•˜ëŠ” ë°©ë²•(ë‚ ì§œ ë°ì´í„°ê°€ ì¹´í…Œê³ ë¦¬ ê°’ìœ¼ë¡œ ì·¨ê¸‰ë˜ì–´ top, freq ë“±ì˜ ê¸°ìˆ í†µê³„ê°’ì„ ë°˜í™˜í•¨)ë„ ìˆì§€ë§Œ describe í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ìˆ í†µê³„ê°’ì„ ë‚¼ ë•Œ, ```datetime_is_numeric=True``` ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ì—¬ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ë°œìƒë˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.<br>
ì•„ë˜ ì´ë¯¸ì§€ëŠ” [Kaggle datasets, 'Forecasting Mini-Course Sales'](https://www.kaggle.com/competitions/playground-series-s3e19) ë°ì´í„° ì»¬ëŸ¼ ì¤‘ 'date' ë¥¼ pandasì˜ to_datetime í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚ ì§œ ë°ì´í„°ë¡œ ë³€í™˜í•˜ê³  í•¨ìˆ˜ë¥¼ ì ìš©í–ˆì„ ë•Œì˜ ê²°ê³¼ì´ë‹¤.

<div style="text-align : center;">
<img src="/assets/images/python/python_14_3.png">
</div>
<center><small>Fig 3. ë‚ ì§œ ë°ì´í„°ë¥¼ í¬í•¨í•  ë•Œ, í•¨ìˆ˜ ì‚¬ìš© ê²°ê³¼</small></center>

<br>

Fig 2ì™€ Fig 3ì„ ë¹„êµí•´ ë³´ë©´, date ì»¬ëŸ¼ì˜ dtypesê°€ objectì—ì„œ datetimeìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤. 
- **object**ì¼ ë•Œ: min, max ê°€ NaN ì´ê³  top, freq ê°’ì´ ì±„ì›Œì ¸ìˆìŒ
- **datetime**ì¼ ë•Œ: min, max ê°’ì´ ì±„ì›Œì ¸ìˆê³  top, freq ê°’ì´ NaN ì„

<br>

ğŸ‘©ğŸ»â€ğŸ’»ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤
<br>ì˜¤ë¥˜ë‚˜ í‹€ë¦° ë¶€ë¶„ì´ ìˆì„ ê²½ìš° ëŒ“ê¸€ í˜¹ì€ ë©”ì¼ë¡œ ë”°ë”í•˜ê²Œ ì§€ì í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.
{: .notice}