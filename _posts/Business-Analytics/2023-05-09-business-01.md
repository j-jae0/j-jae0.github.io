---
title:  "[비즈니스 분석] Python으로 E-commerce 데이터 분석하기 - EDA"
layout: single

categories: "Project"
tags: ["Python", "EDA"]

toc: true
toc_sticky: true
toc_label : "목차"
toc_icon: "bars"
published: false
---

<small>목표: Kaggle의 'United States E-Commerce records 2020' 데이터셋으로 RFM 분석하기 전, EDA를 진행한다.</small>

***

# 프로젝트 목적
- '2020년 미국의 E-커머스 판매 데이터'를 사용하여 자사 서비스의 매출을 증가시킬 수 있는 방법을 고안해 본다.
- 유저의 구매 데이터를 기반으로 RFM 분석을 하고, 이를 바탕으로 인사이트와 액션을 제안해 본다.

<br>

# 1. 데이터, 라이브러리 로드
분석에 필요한 라이브러리를 로드한다.
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# 그래프 그릴 때, 한글지원
import koreanize_matplotlib
%config InlineBackend.figure_format = 'retina'
```

Kaggle에서 다운받은 파일을 로드한다.
```python
df = pd.read_csv('US_E_commerce_records_2020.csv', encoding='windows-1252')
```

## 1-1. 인코딩 이슈
다운받은 데이터를 아래와 같이 불러오면 다음 에러 메시지가 출력된다.

```python
df = pd.read_csv('US_E_commerce_records_2020.csv')
```

<span style="color: red">UnicodeDecodeError: 'utf-8' codec can't decode byte 0xa0 in position 8587: invalid start byte</span>

🚨 **에러 해석**<br>
utf-8 방식으로 디코딩할 수 없고 위치가 8587의 바이트가 0xa0라는 의미이다. 이때 0xa0는 hexadecimal(16진수)로 표현된 '줄바꿈 하지 않는 공백(non-breaking space, NBSP)'이다. 특정 위치에 공백의 기호가 0xa0로 들어가있어서 utf-8 방식으로 디코드할 수 없다는 뜻이다. 이를 해결하기 위해 확장된 ASCII 에 널리 사용되는 windons-1252를 사용하면 된다.
{: .notice--danger}

<br>

# 2. 데이터 확인
데이터가 어떻게 구성되어있는지 확인하기 위해 데이터 프레임에서 가장 앞에 있는 5개의 행을 출력한다.
```python
df.head()
```
![head](/assets/images/US_E_Commerce/df_head.png){: .align-center}

데이터를 보면 알 수 있듯이 주문 일자가 문자열 형태로 '일-월-연도'로 저장되어있다. 빨간색 테두리로 감싸진 부분을 보면 주문일자, 주문번호, 고객id가 같은 것을 알 수 있다. 즉 한 고객이 같은 날 여러 물건을 주문하면 주문한 물건마다 행으로 저장된다는 것을 알 수 있다. 예를 들어 장바구니에 들어간 고기와 양파를 주문한다면 고기에 대한 주문 데이터, 양파에 대한 주문 데이터가 따로 들어간다.

```python
# 데이터가 어떻게 구성되어있는지 확인하고 각 열들의 자료형을 확인한다.
df.info()
```

![head](/assets/images/US_E_Commerce/df_info.png){: .align-center width="45%"}

총 19개의 열, 3312개의 행으로 이루어져있으며 모든 열에 대해 결측치는 없다.

## 2-1. Attribute Information
- **Order Date** : 주문 일자
- **Row ID** : 행에 대한 id
- **Order ID** : 주문건에 대한 id
- **Ship Mode** : 배송 등급(Standard Class/Second Class/First Class/Same Day)
- **Customer ID** : 고객의 고유 id
- **Segment** : 고객의 타입(Consumer/Corporate/Home Office)
- **Country** : 고객의 국가
- **City** : 고객의 도시
- **State** : 고객의 주
- **Postal Code** : 고객의 우편변호
- **Region** : 고객이 위치한 지역
- **Product ID** : 제품의 아이디
  - category(3)-subcategory(2)-고유아이디 순으로 제품의 아이디가 결정됨
- **Category** : 제품의 1차 분류 카테고리(Office Supplies/Furniture/Technology)
- **Sub-Category** : 제품의 1차 분류 카테고리를 기반한 상세 카테고리
- **Product Name** : 제품의 이름
- **Sales** : 판매가
- **Quatity** : 구매 수량
- **Discount** : 할인율
- **Proit** : 매출에 대비한 순 이익

<br>

# 3. 기술 통계
```python
# 수치 타입의 기술통계를 구한다.
df.describe()
```

![describe](/assets/images/US_E_Commerce/describe.png){: .align-center width="75%"}

```python
# 문자열 타입의 기술통계를 구한다.
df.describe(include="O")
```

![describe](/assets/images/US_E_Commerce/describe_object.png){: .align-center}

- 순이익(Profit)은 -값 또는 +값이 될 수 있다. 
- 주문 id의 nunique 값(1687)은 사용자가 1개 이상의 물품이 담긴 장바구니를 구매횟수를 의미한다. 
- Country가 United States 뿐이라는 점에서 해외 배송이 이루어지지 않는 사이트임을 알 수 있다.
- 3312건에 대한 데이터는 694명의 회원에 의해 판매된 것이다. 
- 판매되고 있는 주요 물품은 사무용품으로 판매의 약 60%를 차지한다. 그 중 바인더가 주 판매 물품인 것으로 보인다.

<br>

# 4. 

```python

```

<br>

# . Reference
- [Kaggle, 'United States E-Commerce records 2020' 데이터셋 출처](https://www.kaggle.com/datasets/ammaraahmad/us-ecommerce-record-2020)
- [bytetool, ASCII/Binary of 0xa0](https://bytetool.web.app/en/ascii/code/0xa0/)
- [stackoverflow, 'utf-8' codec can't decode byte 0xa0 in position 4276: invalid start byte](https://stackoverflow.com/questions/48067514/utf-8-codec-cant-decode-byte-0xa0-in-position-4276-invalid-start-byte)

<br>

👩🏻‍💻개인 공부 기록용 블로그입니다
<br>오류나 틀린 부분이 있을 경우 댓글 혹은 메일로 따끔하게 지적해주시면 감사하겠습니다.
{: .notice}