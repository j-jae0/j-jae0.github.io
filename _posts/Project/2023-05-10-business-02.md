---
title:  "[비즈니스 분석] Python으로 US E-commerce 데이터 분석하기 - RFM"
layout: single

categories: "Project"
tags: ["Python", "RFM"]

toc: true
toc_sticky: true
toc_label : "목차"
toc_icon: "bars"
published: false
---

<small>목표: Kaggle의 'United States E-Commerce records 2020' 데이터셋으로 RFM 분석한다.</small>

***

# 프로젝트 목적
- '2020년 미국의 E-커머스 판매 데이터'를 사용하여 자사 서비스의 매출을 증가시킬 수 있는 방법을 고안해 본다.
- 유저의 구매 데이터를 기반으로 RFM 분석을 하고, 이를 바탕으로 인사이트와 액션을 제안해 본다.

<br>

# 1. 데이터, 라이브러리 로드
분석에 필요한 라이브러리를 로드한다.
```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# 그래프 그릴 때, 한글지원
import koreanize_matplotlib
%config InlineBackend.figure_format = 'retina'
```

Kaggle에서 다운받은 파일을 로드한다.
```python
df = pd.read_csv('US_E_commerce_records_2020.csv', encoding='windows-1252')
```

📝 **windows-1252**<br>
해당 파일을 로드하면 utf-8 방식으로 디코딩할 수 없고 위치가 8587의 바이트가 0xa0라는 에러 메세지가 발생한다. 확장된 ASCII 에 널리 사용되는 windons-1252를 사용하면 데이터를 불러올 수 있다. 자세한 해결 과정은 [EDA 과정을 담은 게시물](https://j-jae0.github.io/project/business-01/)을 참고하면 된다.
{: .notice}

<br>

# 2. 고객에 대한 데이터셋 정의
df(raw data)는 한 장바구니에 대한 데이터라도 물품별 주문건수를 행으로 기입된 것이다. 고객별로 주문건수가 어떻게 되는지, 총 지출정도가 어떻게 되는지 등을 새로운 데이터프레임으로 정의한다. 

```python
# 고객별 총 판매액, 순이익, 첫구매일, 최근구매일, 구매횟수를 customer_df에 저장한다.
customer_df = df.groupby(by='Customer ID').agg({'Sales': 'sum', 
                                                'Profit': 'sum', 
                                                'Order Date': ['min', 'max'], 
                                                'Order ID': 'nunique'})
# 인덱스에 위치한 사용자 id를 컬럼으로 내보낸다.
customer_df.reset_index(inplace=True)

# 컬럼명을 다시 정의한다.
columns = ['customer_id', 'total_sales', 'total_profit','first_order_date', 'last_order_date', 'cnt_orders']
customer_df.columns = columns
```

![datetime_info](/assets/images/US_E_Commerce/customer_df_head.png){: .align-center width="60%"}
<center><small>customer_df.head()의 출력 결과물</small></center>

<br>

# 3. 

<br>

# Reference
- [Kaggle, 'United States E-Commerce records 2020' 데이터셋 출처](https://www.kaggle.com/datasets/ammaraahmad/us-ecommerce-record-2020)

<br>

👩🏻‍💻개인 공부 기록용 블로그입니다
<br>오류나 틀린 부분이 있을 경우 댓글 혹은 메일로 따끔하게 지적해주시면 감사하겠습니다.
{: .notice}